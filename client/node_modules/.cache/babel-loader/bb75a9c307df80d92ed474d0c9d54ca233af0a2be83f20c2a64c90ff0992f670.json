{"ast":null,"code":"import React,{useEffect,useState}from'react';import SingleGrid from'./SingleGrid';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export default function Grid(_ref){let{socket,user_data,matrix,setMatrix,isRoomFull}=_ref;const[user_lis,setUserLis]=useState([]);const[myTurn,setMyTurn]=useState(user_data.data.client_turn==='X'?true:false);useEffect(()=>{if(!socket)return;socket.on('get_matrix',mat=>{console.log(\"got the matrix\",matrix);setMatrix(mat);});//  receving user using call back \nsocket.emit('get_user_lis',response=>{console.log('calling for data ',response);setUserLis(response);});// Listen for user list updates\nsocket.on('update_user_lis',updatedUserLis=>{console.log('updated user list',updatedUserLis);setUserLis(updatedUserLis);});socket.on('update_move',()=>setMyTurn(true));return()=>{socket.off('get_matrix');};},[socket]);return/*#__PURE__*/_jsxs(\"div\",{className:\"h-screen w-screen \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\" flex justify-center items-center flex-col gap-4 \",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-5xl\",children:[\"Welcome \",user_data.data.client_user_name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl\",children:[\"You are a \",user_data.data.client_turn,\" player\"]}),isRoomFull?/*#__PURE__*/_jsx(\"p\",{children:myTurn?\"Your Turn\":\"wait for other player to take his turn\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Wait for other user to join\"}),/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md grid grid-cols-3 gap-3 bg-yellow-500 p-3 \",children:matrix?matrix.map((row,rowIdx)=>row.map((cell,cellIdx)=>/*#__PURE__*/_jsx(SingleGrid,{cell_value:cell,matrix:matrix,socket:socket,turn:user_data.data.client_turn,room_id:user_data.data.client_user_room_id,rowind:rowIdx,colind:cellIdx,myTurn:myTurn,setMyTurn:setMyTurn,isRoomFull:isRoomFull},\"\".concat(rowIdx,\"_\").concat(cellIdx)))):/*#__PURE__*/_jsx(\"h1\",{children:\"Loading...\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute p-2 bottom-6 right-4\",children:user_lis.map(user=>/*#__PURE__*/_jsxs(\"p\",{className:\"p-2 bg-slate-300 rounded-md\",children:[\" \",user]}))})]});}","map":{"version":3,"names":["React","useEffect","useState","SingleGrid","jsxs","_jsxs","jsx","_jsx","Grid","_ref","socket","user_data","matrix","setMatrix","isRoomFull","user_lis","setUserLis","myTurn","setMyTurn","data","client_turn","on","mat","console","log","emit","response","updatedUserLis","off","className","children","client_user_name","map","row","rowIdx","cell","cellIdx","cell_value","turn","room_id","client_user_room_id","rowind","colind","concat","user"],"sources":["B:/React App/Tic Tac Toe multiplayer/client/src/Grid.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport SingleGrid from './SingleGrid'\r\n\r\nexport default function Grid({socket,user_data,matrix,setMatrix,isRoomFull}) {\r\n    \r\n    const [user_lis ,setUserLis] = useState([]);                  \r\n    const [myTurn,setMyTurn] = useState((user_data.data.client_turn === 'X' ? true : false));     \r\n    \r\n    useEffect(()=>{\r\n        if(!socket) return;\r\n         socket.on('get_matrix',(mat)=>{\r\n            console.log(\"got the matrix\",matrix)    \r\n            setMatrix(mat);\r\n         })\r\n        \r\n\r\n        //  receving user using call back \r\n        socket.emit('get_user_lis',(response)=>{\r\n            console.log('calling for data ',response);\r\n            setUserLis(response);\r\n        })\r\n\r\n        // Listen for user list updates\r\n        socket.on('update_user_lis', (updatedUserLis) => {\r\n            console.log('updated user list', updatedUserLis);\r\n            setUserLis(updatedUserLis);\r\n        });\r\n\r\n        socket.on('update_move',()=>setMyTurn(true));\r\n\r\n\r\n         return () => {\r\n            socket.off('get_matrix');\r\n          }; \r\n    },[socket])\r\n\r\n\r\n    \r\n\r\n  return (\r\n    <div className=\"h-screen w-screen \">\r\n                        \r\n            {/* status section  */}\r\n            <div className=\" flex justify-center items-center flex-col gap-4 \">\r\n            <p className=\"text-5xl\">Welcome {user_data.data.client_user_name}</p>\r\n                <p className=\"text-3xl\">You are a {user_data.data.client_turn} player</p>\r\n\r\n                {isRoomFull ? \r\n                <p>{myTurn ? \"Your Turn\" : \"wait for other player to take his turn\" }</p>\r\n                : <p>Wait for other user to join</p> }\r\n                \r\n                \r\n                {/* grid  */}\r\n                \r\n                \r\n                <div className={`rounded-md grid grid-cols-3 gap-3 bg-yellow-500 p-3 `}  >\r\n                    {/* SingleGrid  */}\r\n                    {matrix ? (\r\n                                matrix.map((row, rowIdx) => (\r\n                                    row.map((cell, cellIdx) => (\r\n                                    <SingleGrid\r\n                                        cell_value={cell}\r\n                                        key={`${rowIdx}_${cellIdx}`}\r\n                                        matrix={matrix}\r\n                                        socket={socket}\r\n                                        turn={user_data.data.client_turn}\r\n                                        room_id={user_data.data.client_user_room_id}\r\n                                        rowind={rowIdx}\r\n                                        colind={cellIdx}\r\n                                        myTurn={myTurn}\r\n                                        setMyTurn={setMyTurn}\r\n                                        isRoomFull={isRoomFull}\r\n                                    />\r\n                                    ))\r\n                                ))\r\n                                ) : (\r\n                                <h1>Loading...</h1>\r\n                                )}\r\n\r\n                </div>\r\n            \r\n            </div>\r\n\r\n            {/* User login status  */}\r\n            <div className=\"absolute p-2 bottom-6 right-4\"> \r\n                {user_lis.map(user=>(\r\n                    \r\n                    <p className='p-2 bg-slate-300 rounded-md'> {user}</p>\r\n                    \r\n                    \r\n                ))}\r\n            </div>\r\n            \r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}